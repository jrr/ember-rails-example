
machine:
  node:
    version: 4.8.3

dependencies:
  pre:
    - echo dependencies pre
    - bundle check --path=vendor/bundle || bundle install --path=vendor/bundle --jobs=4 --retry=3
    - cd web-client && ( test -x node_modules/.bin/grunt && node_modules/.bin/grunt check_npm_dependencies || yarn install )
    - cd web-client && node_modules/.bin/bower install
    - echo Using PhantomJS Version `phantomjs --version`
  cache_directories:
    - "vendor/bundle"
    - "frontend/bower_components"
    - "frontend/node_modules"
